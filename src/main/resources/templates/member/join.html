<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>회원가입</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
</head>
<body>
<div th:replace="~{/fragment/header :: header}"></div>

<div class="container w-50 mt-3">
    <h1 class="h3 mb-3 fw-normal text-center">회원가입</h1>

    <div class="form-floating m-2">
        <input type="text" class="form-control" id="loginId" placeholder="id">
        <label for="loginId">id</label>
    </div>
    <div class="form-floating m-2">
        <input type="text" class="form-control" id="name" placeholder="name">
        <label for="name">name</label>
    </div>

    <div class="form-floating m-2">
        <input type="password" class="form-control" id="password" placeholder="Password">
        <label for="password">Password</label>
    </div>

    <div class="form-floating m-2">
        <input type="text" class="form-control" id="phoneNumber" placeholder="phoneNumber">
        <label for="phoneNumber">phoneNumber</label>
    </div>

    <div class="form-floating m-2">
        <input type="email" class="form-control" id="email" placeholder="email">
        <label for="email">email</label>
    </div>

    <div class="d-flex justify-content-center">
        <button class="btn btn-primary w-25 py-2" id="joinButton">회원 가입</button>
    </div>
    <p class="mt-5 mb-3 text-body-secondary">© 2017–2024</p>
</div>
</body>

<script>
    const joinButton = document.getElementById('joinButton');

    joinButton.addEventListener('click', event=> {
        fetch("/api/members",{
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                loginId: document.getElementById("loginId").value,
                name: document.getElementById("name").value,
                password: document.getElementById("password").value,
                phoneNumber: document.getElementById("phoneNumber").value,
                email: document.getElementById("email").value
            })
        }).then(() => {
            alert("회원가입이 완료되었습니다.")
            location.replace("/")
        })
    })

</script>

</html>